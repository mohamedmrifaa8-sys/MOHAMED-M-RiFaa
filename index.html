<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wasim Store</title>
<style>
body { margin:0; font-family:Arial; background:#000; color:white; text-align:center; }
.header{background:#111;padding:20px; display:flex; justify-content:space-between; align-items:center;}
.header-left{color:gold; text-align:left;}
.header-left div{font-size:22px; font-weight:bold; line-height:1.3;}
.header-left .contact{font-size:18px; margin-top:5px; color:gold;}
.nav-links{display:flex; gap:10px;}
.btn, .back-btn, .action-btn{display:inline-block;padding:10px 20px;background:gold;color:black;font-weight:bold;border-radius:8px;text-decoration:none;cursor:pointer;}
.products, .manage-page{display:none;padding:20px;background:#111;text-align:right;}
.product-card{background:#222;padding:15px;margin:15px auto;width:90%;max-width:350px;border-radius:10px;text-align:right;}
.product-card img{width:100%;border-radius:10px;}
.price{font-size:18px;color:gold;}
.input-field{width:90%;max-width:250px;padding:8px;margin:5px 0;border-radius:6px;border:none;}
.footer{margin-top:30px;font-size:14px;}
.delete-btn{background:red;color:white;margin-top:5px;margin-right:5px;}
.hero{background:url('https://images.unsplash.com/photo-1600185365926-598d33f635f6?auto=format&fit=crop&w=1000&q=80') center/cover no-repeat; height:350px; display:flex; justify-content:center; align-items:center; color:white; font-size:28px; font-weight:bold;}
</style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <div>Wasim@Store</div>
        <div>الإدارة: عبدالرحمن نادر</div>
        <div class="contact">التواصل: 01091232057</div>
        <div class="contact">العنوان: الطمار، باب الشعريه، القاهره</div>
    </div>
    <div class="nav-links">
        <a class="btn" id="homeBtn">الرئيسية</a>
        <a class="btn" id="productsBtn">المنتجات</a>
        <a class="btn" id="adminBtn">لوحة التحكم</a>
    </div>
</div>

<div class="hero">
<a class="btn" id="shopNowBtn">تسوق الآن</a>
</div>

<div class="products" id="productsSection">
<h1>جميع الشنط</h1>
<div id="productsContainer"></div>
<a class="back-btn" id="backBtn">العودة للصفحة الرئيسية</a>
</div>

<div class="manage-page" id="managePage">
<h2>لوحة التحكم</h2>
<input type="text" id="nameInput" placeholder="اسم المنتج" class="input-field"><br>
<input type="number" id="priceInput" placeholder="سعر الجملة" class="input-field"><br>
<input type="number" id="retailInput" placeholder="سعر القطاعي" class="input-field"><br>
<input type="number" id="quantityInput" placeholder="العدد المتاح" class="input-field"><br>
<input type="text" id="colorsInput" placeholder="الألوان المتاحة (افصل بفاصلة ,)" class="input-field"><br>
<input type="file" id="imageFileInput" class="input-field"><br>
<input type="hidden" id="editIndex">
<button class="action-btn" id="saveProductBtn">حفظ</button>
<a class="back-btn" id="backFromManage">العودة للصفحة الرئيسية</a>

<h3>المنتجات الحالية</h3>
<div id="manageContainer"></div>
</div>

<div class="footer">
Eng/ Mohamed Mohamed Refeay<br>
<hr style="border:1px solid gold;width:80%;margin:10px auto;">
<a href="https://wa.me/201091232057" style="color:gold;text-decoration:none;font-size:18px;">تواصل واتساب</a>
</div>

<script>
let products = [];

// تحميل المنتجات من JSON
function loadProducts(){
    fetch('products.json')
    .then(res => res.json())
    .then(data => {
        products = data;
        renderProducts();
    });
}

function renderProducts(){
    const container=document.getElementById('productsContainer');
    container.innerHTML='';
    products.forEach(p=>{
        const div=document.createElement('div');
        div.className='product-card';
        div.innerHTML=`<img src="${p.image}"><h3>${p.name}</h3>
        <div class="price">سعر الجملة: ${p.price} جنيه</div>
        <div class="price">سعر القطاعي: ${p.retail} جنيه</div>
        <div>الألوان: ${p.colors}</div>
        <div class="price">العدد المتاح: ${p.quantity}</div>
        <a href="https://wa.me/201091232057?text=اهلا، اريد شراء ${p.name}" target="_blank" class="back-btn">شراء عبر واتساب</a>`;
        container.appendChild(div);
    });
}

// لوحة التحكم
const adminPassword="1234-qwer";

function showManage(){
    let pass=prompt("ادخل كلمة السر للوصول للوحة التحكم:");
    if(pass!==adminPassword){ alert("كلمة السر خاطئة!"); return; }
    managePage.style.display='block';
    productsSection.style.display='none';
    shopNowBtn.style.display='none';
    renderManage();
}

function renderManage(){
    const manageContainer=document.getElementById('manageContainer');
    manageContainer.innerHTML='';
    products.forEach((p,i)=>{
        const div=document.createElement('div');
        div.className='product-card';
        div.innerHTML=`<img src="${p.image}"><h3>${p.name}</h3>
        <div class="price">سعر الجملة: ${p.price} جنيه</div>
        <div class="price">سعر القطاعي: ${p.retail} جنيه</div>
        <div>الألوان: ${p.colors}</div>
        <div class="price">العدد المتاح: ${p.quantity}</div>
        <button class="delete-btn" onclick="deleteProduct(${i})">حذف</button>
        <button class="action-btn" onclick="editProduct(${i})">تعديل</button>`;
        manageContainer.appendChild(div);
    });
}

function saveProduct(){
    const name=nameInput.value.trim();
    const price=parseInt(priceInput.value);
    const retail=parseInt(retailInput.value);
    const quantity=parseInt(quantityInput.value);
    const colors=colorsInput.value.trim();
    const file=imageFileInput.files[0];
    const index=editIndex.value;

    if(!name || !price || !retail || !quantity || !colors){ alert("املأ جميع الحقول"); return; }

    const reader=new FileReader();
    reader.onload=function(e){
        const image=e.target.result;
        if(index===''){
            products.push({name, price, retail, quantity, colors, image});
        }else{
            products[index]={name, price, retail, quantity, colors, image};
        }

        fetch('save_products.php',{
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify(products)
        }).then(()=>{ loadProducts(); renderManage(); });

        nameInput.value=''; priceInput.value=''; retailInput.value=''; colorsInput.value=''; imageFileInput.value=''; quantityInput.value=''; editIndex.value='';
    }
    if(file){ reader.readAsDataURL(file); }else{ alert("اختر صورة"); }
}

function editProduct(i){
    const p=products[i];
    nameInput.value=p.name;
    priceInput.value=p.price;
    retailInput.value=p.retail;
    colorsInput.value=p.colors;
    quantityInput.value=p.quantity;
    editIndex.value=i;
}

function deleteProduct(i){
    if(confirm("هل أنت متأكد من حذف هذا المنتج؟")){
        products.splice(i,1);
        fetch('save_products.php',{
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify(products)
        }).then(()=>{ loadProducts(); renderManage(); });
    }
}

const shopNowBtn=document.getElementById('shopNowBtn');
const homeBtn=document.getElementById('homeBtn');
const productsBtn=document.getElementById('productsBtn');
const adminBtn=document.getElementById('adminBtn');

shopNowBtn.addEventListener('click',()=>{ productsSection.style.display='block'; shopNowBtn.style.display='none'; renderProducts(); });
productsBtn.addEventListener('click',()=>{ productsSection.style.display='block'; shopNowBtn.style.display='none'; renderProducts(); });
adminBtn.addEventListener('click',showManage);
homeBtn.addEventListener('click',()=>{
    productsSection.style.display='none';
    managePage.style.display='none';
    shopNowBtn.style.display='inline-block';
});
document.getElementById('backBtn').addEventListener('click',()=>{
    productsSection.style.display='none';
    shopNowBtn.style.display='inline-block';
});
document.getElementById('backFromManage').addEventListener('click',()=>{
    managePage.style.display='none';
    shopNowBtn.style.display='inline-block';
});

loadProducts();
</script>
</body>
</html>
